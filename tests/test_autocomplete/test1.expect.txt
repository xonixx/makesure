
set timeout 1

proc checkCompletion { flagPrefix expectedFlag } {
    spawn env PS1=bash#\  bash --norc
    sleep 0.1
    send " cd ../../ ; . completion.bash\r"
    send " ./makesure $flagPrefix\t"

    expect {
        "$expectedFlag" { puts "\nSUCCESS" }
        timeout { puts "\nERROR" }
    }
}

checkCompletion "--sel" "selfupdate"
checkCompletion "--res" "resolved"
